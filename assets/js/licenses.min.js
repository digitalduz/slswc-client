jQuery(function(r){"use strict";r(document).ready(function(){d.init()});const d={init:function(){r(".force-client-environment").on("click",d.toggleEnvironment),r(".license-action").on("click",d.processAction)},toggleEnvironment:function(e){r(this).attr("id");var t=r(this).data("slug");r(this).is(":checked")?(r("#"+t+"_environment").show(),r("#"+t+"_environment-label").show()):(r("#"+t+"_environment").hide(),r("#"+t+"_environment-label").hide())},processAction:function(e){e.preventDefault();let t=r(this),n=r(t).html(),s=(r(t).html(`<img src="${window.slswc_updater_licenses.loader_url}" width="12" height="12"/> Processing`),r(this).data("slug"));var e=r("#"+s+"_license_key").val(),i=r("#"+s+"_current_version").val(),c=r(this).data("action"),a=r(this).data("nonce")??window.slswc_updater_licenses.nonce,o=r(this).data("domain")??r;let l="";r("#"+s+"_force-client-environment").is(":checked")&&r("#"+s+"_environment").is(":visible")&&(l=r("#"+s+"_environment").val()),console.log(s,e,c,o,a,i,l),r.ajax({url:window.slswc_updater_licenses.ajax_url,data:{action:"slswc_activate_license",license_action:c,license_key:e,slug:s,domain:o,version:i,environment:l,nonce:a},dataType:"json",type:"POST",success:function(e){s;r(t).html(n),r("#"+s+"_license_status").val(e.status),r("#"+s+"_license_status_text").html(e.status),0==e.success?d.notice(e.data.message,"error"):"active"===e.status?(d.notice(e.message),r(t).html(window.slswc_updater_licenses.text_deactivate),r(t).data("action","deactivate")):(d.notice(e.message,"error"),r(t).html(window.slswc_updater_licenses.text_activate),r(t).data("action","activate"))},error:function(e){e=e.message;d.notice(e,"error"),r(t).html(n)}})},notice:function(e,t="success",n=!0){let s=`<div class="${t} notice is-dismissible"><p>${e}</p>`;n&&(s+='<button type="button" class="notice-dismiss"><span class="screen-reader-text">Dismiss this notice.</span></button>'),s+="</div>",r("#license-action-response-message").html(s)}}});